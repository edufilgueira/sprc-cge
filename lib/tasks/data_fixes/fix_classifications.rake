namespace :fix_classifications do

  task build_hash: :environment do

    # total de ids (104)
    # ids = [2327, 2310, 3692, 4201, 5983, 6523, 660, 1098, 7628, 7931, 7697, 8489, 8773, 8741, 8298, 9039, 9069, 9083, 9195, 9120, 9659, 8219, 9882, 8397, 6034, 9999, 10680, 7017, 10926, 11432, 11146, 10946, 11276, 11373, 11798, 11235, 12208, 11991, 11371, 11836, 11146, 12487, 11969, 11874, 11833, 11999, 3665, 12555, 12377, 12354, 12220, 12139, 12153, 12295, 12414, 12250, 12821, 12302, 12206, 12709, 13105, 13048, 12786, 11811, 13078, 12630, 12491, 12964, 12813, 13461, 13595, 11185, 13570, 13384, 13270, 13690, 13407, 13852, 11399, 12955, 14019, 13331, 12980, 13132, 12337, 14195, 7037, 13119, 14182, 14161, 14246, 14253, 14099, 14173, 13209, 11975, 14196, 14155, 14037, 14174, 14257, 14230, 14216, 12937, 14273]

    # dump dia 20/08/2018 (84)
    ids = [660, 1098, 2310, 2327, 7628, 7697, 7931, 8219, 8298, 8397, 8489, 8741, 8773, 9039, 9069, 9083, 9120, 9195, 9659, 9882, 9999, 10680, 10926, 10946, 11185, 11235, 11276, 11371, 11373, 11399, 11798, 11833, 11836, 11874, 11975, 11991, 11999, 12139, 12153, 12206, 12208, 12220, 12250, 12295, 12302, 12337, 12354, 12377, 12414, 12487, 12491, 12630, 12709, 12786, 12821, 12937, 13048, 13078, 13105, 13119, 13132, 13270, 13331, 13384, 13407, 13461, 13570, 13595, 13690, 13852, 14037, 14099, 14155, 14161, 14173, 14174, 14182, 14195, 14196, 14216, 14230, 14257]


    # dump dia 16/08/2018 (22)
    # ids = [3665, 3692, 4201, 5983, 6034, 6523, 7017, 7037, 11146, 11432, 11811, 11969, 12555, 12813, 12955, 12964, 12980, 13209, 14019, 14246, 14253, 14273]

    classification_params = [ :id, :ticket_id, :topic_id, :subtopic_id, :department_id, :sub_department_id, :budget_program_id, :service_type_id, :other_organs ]

    tickets = Ticket.where(id: ids)

    tickets_hash = []

    tickets.each do |ticket|
      next unless ticket.classified?

      tickets_hash.concat([{
        id: ticket.id,
        classification_attributes: ticket.classification.attributes.symbolize_keys.slice(*classification_params)
      }])
    end

    File.open("public/temp.json","w") do |f|
      f.write(tickets_hash)
    end
  end


  task load: :environment do

    tickets_hash = [{:id=>9999, :classification_attributes=>{:id=>3168, :ticket_id=>9999, :topic_id=>1063, :subtopic_id=>nil, :department_id=>2082, :sub_department_id=>4477, :budget_program_id=>247, :service_type_id=>4202, :other_organs=>false}}, {:id=>14037, :classification_attributes=>{:id=>4464, :ticket_id=>14037, :topic_id=>871, :subtopic_id=>4473, :department_id=>1194, :sub_department_id=>2832, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>9039, :classification_attributes=>{:id=>2712, :ticket_id=>9039, :topic_id=>1103, :subtopic_id=>5380, :department_id=>2006, :sub_department_id=>nil, :budget_program_id=>288, :service_type_id=>nil, :other_organs=>false}}, {:id=>9069, :classification_attributes=>{:id=>2715, :ticket_id=>9069, :topic_id=>1103, :subtopic_id=>5383, :department_id=>2006, :sub_department_id=>nil, :budget_program_id=>286, :service_type_id=>nil, :other_organs=>false}}, {:id=>2310, :classification_attributes=>{:id=>610, :ticket_id=>2310, :topic_id=>1063, :subtopic_id=>nil, :department_id=>2079, :sub_department_id=>4495, :budget_program_id=>247, :service_type_id=>4202, :other_organs=>false}}, {:id=>11999, :classification_attributes=>{:id=>3902, :ticket_id=>11999, :topic_id=>1065, :subtopic_id=>5306, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>8219, :classification_attributes=>{:id=>2919, :ticket_id=>8219, :topic_id=>976, :subtopic_id=>4929, :department_id=>1506, :sub_department_id=>3162, :budget_program_id=>190, :service_type_id=>nil, :other_organs=>false}}, {:id=>8773, :classification_attributes=>{:id=>2557, :ticket_id=>8773, :topic_id=>1395, :subtopic_id=>6851, :department_id=>1503, :sub_department_id=>3159, :budget_program_id=>189, :service_type_id=>nil, :other_organs=>false}}, {:id=>11874, :classification_attributes=>{:id=>3889, :ticket_id=>11874, :topic_id=>1079, :subtopic_id=>nil, :department_id=>2082, :sub_department_id=>4477, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>8489, :classification_attributes=>{:id=>2506, :ticket_id=>8489, :topic_id=>975, :subtopic_id=>4913, :department_id=>2006, :sub_department_id=>nil, :budget_program_id=>288, :service_type_id=>nil, :other_organs=>false}}, {:id=>2327, :classification_attributes=>{:id=>517, :ticket_id=>2327, :topic_id=>1058, :subtopic_id=>5274, :department_id=>1743, :sub_department_id=>nil, :budget_program_id=>168, :service_type_id=>nil, :other_organs=>false}}, {:id=>13119, :classification_attributes=>{:id=>4426, :ticket_id=>13119, :topic_id=>999, :subtopic_id=>5027, :department_id=>2001, :sub_department_id=>4253, :budget_program_id=>237, :service_type_id=>nil, :other_organs=>false}}, {:id=>9195, :classification_attributes=>{:id=>2735, :ticket_id=>9195, :topic_id=>1395, :subtopic_id=>6851, :department_id=>1503, :sub_department_id=>3159, :budget_program_id=>189, :service_type_id=>nil, :other_organs=>false}}, {:id=>8741, :classification_attributes=>{:id=>2631, :ticket_id=>8741, :topic_id=>970, :subtopic_id=>4901, :department_id=>1901, :sub_department_id=>nil, :budget_program_id=>289, :service_type_id=>nil, :other_organs=>false}}, {:id=>11975, :classification_attributes=>{:id=>4462, :ticket_id=>11975, :topic_id=>979, :subtopic_id=>4935, :department_id=>1837, :sub_department_id=>4111, :budget_program_id=>377, :service_type_id=>nil, :other_organs=>false}}, {:id=>13132, :classification_attributes=>{:id=>4422, :ticket_id=>13132, :topic_id=>977, :subtopic_id=>nil, :department_id=>1901, :sub_department_id=>nil, :budget_program_id=>362, :service_type_id=>nil, :other_organs=>false}}, {:id=>7697, :classification_attributes=>{:id=>2512, :ticket_id=>7697, :topic_id=>1395, :subtopic_id=>6849, :department_id=>1503, :sub_department_id=>3157, :budget_program_id=>189, :service_type_id=>nil, :other_organs=>false}}, {:id=>660, :classification_attributes=>{:id=>1852, :ticket_id=>660, :topic_id=>986, :subtopic_id=>4977, :department_id=>1264, :sub_department_id=>2927, :budget_program_id=>279, :service_type_id=>4403, :other_organs=>false}}, {:id=>12250, :classification_attributes=>{:id=>3984, :ticket_id=>12250, :topic_id=>1065, :subtopic_id=>5306, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>12377, :classification_attributes=>{:id=>3948, :ticket_id=>12377, :topic_id=>1065, :subtopic_id=>5306, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>14099, :classification_attributes=>{:id=>4432, :ticket_id=>14099, :topic_id=>998, :subtopic_id=>5018, :department_id=>1721, :sub_department_id=>3837, :budget_program_id=>353, :service_type_id=>4774, :other_organs=>false}}, {:id=>11836, :classification_attributes=>{:id=>3844, :ticket_id=>11836, :topic_id=>1075, :subtopic_id=>nil, :department_id=>2082, :sub_department_id=>4478, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>11235, :classification_attributes=>{:id=>3689, :ticket_id=>11235, :topic_id=>1066, :subtopic_id=>5309, :department_id=>2082, :sub_department_id=>4477, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>13595, :classification_attributes=>{:id=>4240, :ticket_id=>13595, :topic_id=>1066, :subtopic_id=>5309, :department_id=>2082, :sub_department_id=>4477, :budget_program_id=>247, :service_type_id=>4193, :other_organs=>false}}, {:id=>11371, :classification_attributes=>{:id=>3802, :ticket_id=>11371, :topic_id=>983, :subtopic_id=>4961, :department_id=>1194, :sub_department_id=>2835, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>7628, :classification_attributes=>{:id=>2281, :ticket_id=>7628, :topic_id=>1233, :subtopic_id=>5826, :department_id=>1670, :sub_department_id=>3680, :budget_program_id=>248, :service_type_id=>nil, :other_organs=>false}}, {:id=>12139, :classification_attributes=>{:id=>3950, :ticket_id=>12139, :topic_id=>1065, :subtopic_id=>5305, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>4732, :other_organs=>false}}, {:id=>12153, :classification_attributes=>{:id=>3969, :ticket_id=>12153, :topic_id=>1065, :subtopic_id=>5306, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>4732, :other_organs=>false}}, {:id=>11185, :classification_attributes=>{:id=>4283, :ticket_id=>11185, :topic_id=>975, :subtopic_id=>4917, :department_id=>1790, :sub_department_id=>3950, :budget_program_id=>257, :service_type_id=>nil, :other_organs=>false}}, {:id=>9882, :classification_attributes=>{:id=>2970, :ticket_id=>9882, :topic_id=>1068, :subtopic_id=>5331, :department_id=>2079, :sub_department_id=>4496, :budget_program_id=>237, :service_type_id=>4732, :other_organs=>false}}, {:id=>12354, :classification_attributes=>{:id=>3955, :ticket_id=>12354, :topic_id=>1065, :subtopic_id=>5306, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>12414, :classification_attributes=>{:id=>3967, :ticket_id=>12414, :topic_id=>1462, :subtopic_id=>7258, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>237, :service_type_id=>4732, :other_organs=>false}}, {:id=>10946, :classification_attributes=>{:id=>3531, :ticket_id=>10946, :topic_id=>1068, :subtopic_id=>5327, :department_id=>2079, :sub_department_id=>4496, :budget_program_id=>237, :service_type_id=>4732, :other_organs=>false}}, {:id=>10680, :classification_attributes=>{:id=>3211, :ticket_id=>10680, :topic_id=>1069, :subtopic_id=>nil, :department_id=>2085, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>4416, :other_organs=>false}}, {:id=>12786, :classification_attributes=>{:id=>4075, :ticket_id=>12786, :topic_id=>971, :subtopic_id=>4907, :department_id=>1195, :sub_department_id=>2838, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>12206, :classification_attributes=>{:id=>4029, :ticket_id=>12206, :topic_id=>998, :subtopic_id=>5020, :department_id=>2399, :sub_department_id=>nil, :budget_program_id=>136, :service_type_id=>nil, :other_organs=>false}}, {:id=>12208, :classification_attributes=>{:id=>3776, :ticket_id=>12208, :topic_id=>1065, :subtopic_id=>5306, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>7931, :classification_attributes=>{:id=>2443, :ticket_id=>7931, :topic_id=>989, :subtopic_id=>nil, :department_id=>2222, :sub_department_id=>4580, :budget_program_id=>202, :service_type_id=>nil, :other_organs=>false}}, {:id=>13407, :classification_attributes=>{:id=>4321, :ticket_id=>13407, :topic_id=>970, :subtopic_id=>4901, :department_id=>1540, :sub_department_id=>3249, :budget_program_id=>298, :service_type_id=>nil, :other_organs=>false}}, {:id=>9659, :classification_attributes=>{:id=>2912, :ticket_id=>9659, :topic_id=>1066, :subtopic_id=>5309, :department_id=>2082, :sub_department_id=>4477, :budget_program_id=>247, :service_type_id=>4193, :other_organs=>false}}, {:id=>8397, :classification_attributes=>{:id=>2990, :ticket_id=>8397, :topic_id=>1395, :subtopic_id=>6849, :department_id=>1503, :sub_department_id=>3159, :budget_program_id=>189, :service_type_id=>nil, :other_organs=>false}}, {:id=>14155, :classification_attributes=>{:id=>4461, :ticket_id=>14155, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>14161, :classification_attributes=>{:id=>4439, :ticket_id=>14161, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>12491, :classification_attributes=>{:id=>4104, :ticket_id=>12491, :topic_id=>1066, :subtopic_id=>5309, :department_id=>2082, :sub_department_id=>4477, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>12821, :classification_attributes=>{:id=>4031, :ticket_id=>12821, :topic_id=>998, :subtopic_id=>5020, :department_id=>1314, :sub_department_id=>2973, :budget_program_id=>136, :service_type_id=>nil, :other_organs=>false}}, {:id=>13570, :classification_attributes=>{:id=>4311, :ticket_id=>13570, :topic_id=>851, :subtopic_id=>4382, :department_id=>1540, :sub_department_id=>3249, :budget_program_id=>298, :service_type_id=>nil, :other_organs=>false}}, {:id=>8298, :classification_attributes=>{:id=>2689, :ticket_id=>8298, :topic_id=>935, :subtopic_id=>4740, :department_id=>1721, :sub_department_id=>3824, :budget_program_id=>121, :service_type_id=>3167, :other_organs=>false}}, {:id=>14173, :classification_attributes=>{:id=>4433, :ticket_id=>14173, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>14182, :classification_attributes=>{:id=>4435, :ticket_id=>14182, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>13461, :classification_attributes=>{:id=>4230, :ticket_id=>13461, :topic_id=>932, :subtopic_id=>4731, :department_id=>1721, :sub_department_id=>3837, :budget_program_id=>121, :service_type_id=>4441, :other_organs=>false}}, {:id=>11276, :classification_attributes=>{:id=>3581, :ticket_id=>11276, :topic_id=>1079, :subtopic_id=>nil, :department_id=>2074, :sub_department_id=>4498, :budget_program_id=>247, :service_type_id=>4201, :other_organs=>false}}, {:id=>14195, :classification_attributes=>{:id=>4438, :ticket_id=>14195, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>12709, :classification_attributes=>{:id=>4076, :ticket_id=>12709, :topic_id=>1103, :subtopic_id=>5380, :department_id=>2006, :sub_department_id=>nil, :budget_program_id=>288, :service_type_id=>nil, :other_organs=>false}}, {:id=>13852, :classification_attributes=>{:id=>4331, :ticket_id=>13852, :topic_id=>982, :subtopic_id=>4955, :department_id=>1586, :sub_department_id=>nil, :budget_program_id=>197, :service_type_id=>nil, :other_organs=>false}}, {:id=>11991, :classification_attributes=>{:id=>3785, :ticket_id=>11991, :topic_id=>979, :subtopic_id=>4935, :department_id=>1653, :sub_department_id=>3660, :budget_program_id=>342, :service_type_id=>nil, :other_organs=>false}}, {:id=>9120, :classification_attributes=>{:id=>2728, :ticket_id=>9120, :topic_id=>1107, :subtopic_id=>nil, :department_id=>2006, :sub_department_id=>nil, :budget_program_id=>288, :service_type_id=>4452, :other_organs=>false}}, {:id=>13270, :classification_attributes=>{:id=>4325, :ticket_id=>13270, :topic_id=>853, :subtopic_id=>4406, :department_id=>1540, :sub_department_id=>3251, :budget_program_id=>298, :service_type_id=>nil, :other_organs=>false}}, {:id=>14216, :classification_attributes=>{:id=>4481, :ticket_id=>14216, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>12302, :classification_attributes=>{:id=>4027, :ticket_id=>12302, :topic_id=>981, :subtopic_id=>4945, :department_id=>1314, :sub_department_id=>2973, :budget_program_id=>136, :service_type_id=>nil, :other_organs=>false}}, {:id=>12295, :classification_attributes=>{:id=>3971, :ticket_id=>12295, :topic_id=>1066, :subtopic_id=>5309, :department_id=>2082, :sub_department_id=>4477, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>14230, :classification_attributes=>{:id=>4474, :ticket_id=>14230, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>14196, :classification_attributes=>{:id=>4467, :ticket_id=>14196, :topic_id=>851, :subtopic_id=>4382, :department_id=>1540, :sub_department_id=>3249, :budget_program_id=>298, :service_type_id=>nil, :other_organs=>false}}, {:id=>11399, :classification_attributes=>{:id=>4349, :ticket_id=>11399, :topic_id=>1000, :subtopic_id=>5041, :department_id=>1181, :sub_department_id=>2807, :budget_program_id=>237, :service_type_id=>2793, :other_organs=>false}}, {:id=>12630, :classification_attributes=>{:id=>4127, :ticket_id=>12630, :topic_id=>1066, :subtopic_id=>5310, :department_id=>2079, :sub_department_id=>4495, :budget_program_id=>247, :service_type_id=>4193, :other_organs=>false}}, {:id=>11798, :classification_attributes=>{:id=>3704, :ticket_id=>11798, :topic_id=>1079, :subtopic_id=>nil, :department_id=>2082, :sub_department_id=>4477, :budget_program_id=>247, :service_type_id=>4201, :other_organs=>false}}, {:id=>13048, :classification_attributes=>{:id=>4064, :ticket_id=>13048, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>12220, :classification_attributes=>{:id=>3935, :ticket_id=>12220, :topic_id=>1065, :subtopic_id=>5306, :department_id=>2081, :sub_department_id=>nil, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>14174, :classification_attributes=>{:id=>4470, :ticket_id=>14174, :topic_id=>970, :subtopic_id=>4901, :department_id=>1540, :sub_department_id=>3249, :budget_program_id=>298, :service_type_id=>nil, :other_organs=>false}}, {:id=>12937, :classification_attributes=>{:id=>4483, :ticket_id=>12937, :topic_id=>998, :subtopic_id=>5018, :department_id=>1721, :sub_department_id=>3821, :budget_program_id=>353, :service_type_id=>4774, :other_organs=>false}}, {:id=>14257, :classification_attributes=>{:id=>4478, :ticket_id=>14257, :topic_id=>871, :subtopic_id=>4469, :department_id=>1194, :sub_department_id=>2834, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>13690, :classification_attributes=>{:id=>4307, :ticket_id=>13690, :topic_id=>1002, :subtopic_id=>5057, :department_id=>1526, :sub_department_id=>nil, :budget_program_id=>299, :service_type_id=>nil, :other_organs=>false}}, {:id=>1098, :classification_attributes=>{:id=>1977, :ticket_id=>1098, :topic_id=>1391, :subtopic_id=>6727, :department_id=>1262, :sub_department_id=>2914, :budget_program_id=>350, :service_type_id=>nil, :other_organs=>false}}, {:id=>9083, :classification_attributes=>{:id=>2731, :ticket_id=>9083, :topic_id=>1103, :subtopic_id=>5381, :department_id=>2006, :sub_department_id=>nil, :budget_program_id=>286, :service_type_id=>nil, :other_organs=>false}}, {:id=>11833, :classification_attributes=>{:id=>3895, :ticket_id=>11833, :topic_id=>1396, :subtopic_id=>6878, :department_id=>2353, :sub_department_id=>nil, :budget_program_id=>387, :service_type_id=>nil, :other_organs=>false}}, {:id=>13105, :classification_attributes=>{:id=>4054, :ticket_id=>13105, :topic_id=>971, :subtopic_id=>4907, :department_id=>1195, :sub_department_id=>2838, :budget_program_id=>293, :service_type_id=>nil, :other_organs=>false}}, {:id=>10926, :classification_attributes=>{:id=>3460, :ticket_id=>10926, :topic_id=>1079, :subtopic_id=>nil, :department_id=>2079, :sub_department_id=>4495, :budget_program_id=>247, :service_type_id=>4201, :other_organs=>false}}, {:id=>13384, :classification_attributes=>{:id=>4309, :ticket_id=>13384, :topic_id=>970, :subtopic_id=>4894, :department_id=>1538, :sub_department_id=>3203, :budget_program_id=>298, :service_type_id=>nil, :other_organs=>false}}, {:id=>13078, :classification_attributes=>{:id=>4090, :ticket_id=>13078, :topic_id=>1103, :subtopic_id=>5381, :department_id=>2006, :sub_department_id=>nil, :budget_program_id=>288, :service_type_id=>nil, :other_organs=>false}}, {:id=>12487, :classification_attributes=>{:id=>3873, :ticket_id=>12487, :topic_id=>1068, :subtopic_id=>5327, :department_id=>2082, :sub_department_id=>4478, :budget_program_id=>247, :service_type_id=>nil, :other_organs=>false}}, {:id=>13331, :classification_attributes=>{:id=>4390, :ticket_id=>13331, :topic_id=>981, :subtopic_id=>7262, :department_id=>1314, :sub_department_id=>2973, :budget_program_id=>136, :service_type_id=>nil, :other_organs=>false}}, {:id=>12337, :classification_attributes=>{:id=>4434, :ticket_id=>12337, :topic_id=>932, :subtopic_id=>4733, :department_id=>1721, :sub_department_id=>3853, :budget_program_id=>121, :service_type_id=>nil, :other_organs=>false}}, {:id=>11373, :classification_attributes=>{:id=>3603, :ticket_id=>11373, :topic_id=>1062, :subtopic_id=>5298, :department_id=>2082, :sub_department_id=>4478, :budget_program_id=>247, :service_type_id=>4189, :other_organs=>false}}, {:id=>3665, :classification_attributes=>{:id=>3917, :ticket_id=>3665, :topic_id=>1391, :subtopic_id=>6728, :department_id=>1262, :sub_department_id=>2915, :budget_program_id=>279, :service_type_id=>nil, :other_organs=>false}}, {:id=>3692, :classification_attributes=>{:id=>840, :ticket_id=>3692, :topic_id=>1103, :subtopic_id=>5377, :department_id=>2006, :sub_department_id=>nil, :budget_program_id=>209, :service_type_id=>4452, :other_organs=>false}}, {:id=>6034, :classification_attributes=>{:id=>3010, :ticket_id=>6034, :topic_id=>1237, :subtopic_id=>5886, :department_id=>1671, :sub_department_id=>3704, :budget_program_id=>248, :service_type_id=>4211, :other_organs=>false}}, {:id=>7017, :classification_attributes=>{:id=>3201, :ticket_id=>7017, :topic_id=>1239, :subtopic_id=>5895, :department_id=>1672, :sub_department_id=>3721, :budget_program_id=>248, :service_type_id=>4211, :other_organs=>false}}, {:id=>11146, :classification_attributes=>{:id=>3878, :ticket_id=>11146, :topic_id=>1394, :subtopic_id=>6773, :department_id=>2805, :sub_department_id=>nil, :budget_program_id=>189, :service_type_id=>5117, :other_organs=>false}}, {:id=>11969, :classification_attributes=>{:id=>3880, :ticket_id=>11969, :topic_id=>979, :subtopic_id=>4935, :department_id=>1600, :sub_department_id=>3570, :budget_program_id=>290, :service_type_id=>nil, :other_organs=>false}}, {:id=>12555, :classification_attributes=>{:id=>3921, :ticket_id=>12555, :topic_id=>1068, :subtopic_id=>5331, :department_id=>nil, :sub_department_id=>nil, :budget_program_id=>237, :service_type_id=>nil, :other_organs=>false}}, {:id=>12964, :classification_attributes=>{:id=>4164, :ticket_id=>12964, :topic_id=>932, :subtopic_id=>4731, :department_id=>1721, :sub_department_id=>3837, :budget_program_id=>121, :service_type_id=>4441, :other_organs=>false}}]

    tickets_hash.each do |ticket_hash|
      ticket = Ticket.find(ticket_hash[:id])

      next if ticket.classified?

      ticket.create_classification(ticket_hash[:classification_attributes])
    end
  end
end

